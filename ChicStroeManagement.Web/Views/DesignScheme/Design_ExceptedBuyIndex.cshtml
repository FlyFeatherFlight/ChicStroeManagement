@model  List<ChicStoreManagement.WEB.ViewModel.Design_CustomerExceptedBuy>
@{
    ViewBag.Title = "Design_ExceptedBuyIndex";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script>
        function startOn() {
            $("exinfo").load(location.href + " #exinfo");
        }
        function edit(otr) {
            document.getElementById("edit").style.display = "block";
            var rows = otr.parentNode.parentNode.rowIndex;
            var id = $("#product tr:eq(" + rows + ") td:eq(0)").html();
            $("#editid").val(id);
            var receptionid = $("#product tr:eq(" + rows + ") td:eq(1)").html();

            var product = $("#product tr:eq(" + rows + ") td:eq(2)").html();
            var remarks = $("#product tr:eq(" + rows + ") td:eq(3)").html();
            $("#editreception").val(receptionid);
            $("#editproduct").val(product);
            $("#editremark").val(remarks);
        }
        function del(otr) {
            var rows = otr.parentNode.parentNode.rowIndex;
            var Id = $("#product tr:eq(" + rows + ") td:eq(0)").html();
            var receptionid = $("#product tr:eq(" + rows + ") td:eq(1)").html();
            $.ajax({
            type: "POST",
            url: '@Url.Action("DelDesign_ExceptedBuyAction", "DesignScheme")',
            data: { ExceptedBuyID: Id, receptionId: receptionid},
            datatype: "json",
            async: true,//异步
                success: function (data) {
                    alert("删除成功！");
                    var td = $(otr);
                    td.parents("tr").remove();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("系统繁忙！");
            }

        });
        }
</script>
<h2>客户意向产品明细</h2>

<div class="table-responsive container">

    @Html.ActionLink("添加预购信息", "AddDesign_ExceptedBuyView", new { receptionid = @ViewBag.receptionid, @class = "form-control", @Style = "font-size:12px" })
    <hr />
    <table id="product" class="table table-striped">
        <thead>
            <tr>
                <td>序号</td>
                <td>空间</td>
                <td>系列</td>
                <td>产品名称</td>
                <td>单位</td>
                <td>尺寸</td>
                <td>数量</td>
            </tr>
        </thead>
        <tbody>
            @if (Model != null)
            {
                foreach (var item in Model)
                {
            <tr>
                <td>@item.Id</td>
                <td>@item.空间</td>
                <td>@item.系列</td>
                <td>@item.产品</td>
                <td>@item.单位</td>
                <td>@item.尺寸</td>
                <td>@item.数量</td>
                <td><a href="javascript:;" onclick="edit(this)">编辑</a>|<a href="javascript:;" onclick="del(this)">删除</a></td>
            </tr>
                }
            }
        </tbody>
       
    </table>

    <div id="edit" style="display:none" class="form-group">
        <h3>修改</h3>
        <form action="@Url.Action("UpdateDesign_ExceptedBuyAction", "Customer")" method="POST">
            序号:<input name="id" id="editid" class="form-control" readonly="readonly" />
            空间:@Html.DropDownList("型号", ViewBag.ProductOptions as IEnumerable<SelectListItem>, new { @class = "form-control" })
            系列:<input name="系列" id="editremark" class="form-control" />
            产品名称：<input name="产品名称" id="editremark" class="form-control" />
            单位：<input name="单位" id="editremark" class="form-control" />
            尺寸：<input name="尺寸" id="editremark" class="form-control" />
            数量：<input name="数量" id="editremark" class="form-control" />
            <button type="submit" class="btn">提交</button>
        </form>
        <hr />
    </div>

    <br />
    <a onclick="javascript:window.history.go(-1);" value="返回上一页">返回上一页</a>
    <hr />
</div>